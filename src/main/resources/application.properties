spring.config.import=optional:file:./secrets.properties


spring.application.name=charity-hub
spring.data.mongodb.host=localhost
spring.data.mongodb.database=charity_db
spring.data.mongodb.authentication-database=admin
spring.data.mongodb.password=${MONGO_PASSWORD}
spring.data.mongodb.username=${MONGO_USERNAME}
spring.data.mongodb.port=27017
server.port=8080
#management.datadog.metrics.export.apiKey
#logging.level.org.springframework.security=TRACE

# Observability Configuration

# Management Endpoints - expose comprehensive actuator endpoints
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env,loggers,threaddump,heapdump
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true
management.health.mongo.enabled=true

# Metrics Configuration
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.environment=${ENVIRONMENT:local}
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true

# Prometheus Configuration
management.prometheus.metrics.export.enabled=true

# Tracing Configuration (DEV defaults - 100% sampling for debugging)
# Production overrides in application-prod.properties
management.tracing.sampling.probability=1.0
management.tracing.enabled=true
management.tracing.baggage.enabled=true
management.tracing.baggage.correlation.enabled=true
management.tracing.baggage.correlation.fields=userId,requestId

# OpenTelemetry Exporter Configuration (OTLP)
# Uncomment and configure when ready to send traces to an OTLP collector
management.otlp.tracing.endpoint=http://localhost:4318/v1/traces
management.otlp.metrics.export.url=http://localhost:4318/v1/metrics
management.otlp.metrics.export.step=10s
#management.otlp.tracing.headers.authorization=Bearer ${OTLP_TOKEN:}

# OpenTelemetry Logging Configuration
otel.logs.exporter=otlp
otel.exporter.otlp.logs.endpoint=http://localhost:4318/v1/logs
otel.exporter.otlp.protocol=http/protobuf
otel.service.name=${spring.application.name}
otel.resource.attributes=service.name=${spring.application.name},deployment.environment=dev

# Logging Configuration
logging.pattern.level=%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]

spring.task.execution.shutdown.await-termination=true
spring.task.execution.shutdown.await-termination-period=10s

spring.threads.virtual.enabled=true


auth.secretKey=${AUTH_SECRET_KEY}
accounts.admins=${ADMIN_ACCOUNTS}
firebase.service-account-path=./cert/adminsdk.json
firebase.test-mode=true
logging.structured.format.console=ecs
cases.initial-code=20039

# Rate Limiting Configuration
# Set to true to enable rate limiting
rate-limit.enabled=false
# Maximum requests per time window for general API
rate-limit.max-requests=100
# Time window in seconds for general API
rate-limit.window-seconds=60
# Maximum authentication attempts per time window
rate-limit.auth-max-requests=10
# Time window in seconds for authentication
rate-limit.auth-window-seconds=60
